<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lessons for the Materials Project Workshop"><link href=https://workshop.materialsproject.org/lessons/06_exploring_synthesis/Exploring%20Synthesis%20%28blank%29/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.2"><title>Exploring Synthesis (blank) - The Materials Project Workshop</title><link rel=stylesheet href=../../../assets/stylesheets/main.1118c9be.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ba0d045b.min.css><meta name=theme-color content=#546d78><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/workshop.css><link rel=stylesheet href=../../../css/ansi-colours.css><link rel=stylesheet href=../../../css/jupyter-cells.css><link rel=stylesheet href=../../../css/pandas-dataframe.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=blue-grey data-md-color-accent> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#exploring-materials-synthesis-with-mp-data-and-reaction-networks class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="The Materials Project Workshop" class="md-header__button md-logo" aria-label="The Materials Project Workshop" data-md-component=logo> <img src=../../../assets/materials_project_logo_white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The Materials Project Workshop </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Exploring Synthesis (blank) </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/materialsproject/workshop/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="The Materials Project Workshop" class="md-nav__button md-logo" aria-label="The Materials Project Workshop" data-md-component=logo> <img src=../../../assets/materials_project_logo_white.svg alt=logo> </a> The Materials Project Workshop </label> <div class=md-nav__source> <a href=https://github.com/materialsproject/workshop/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../logistics/logistics/ class=md-nav__link> Logistics </a> </li> <li class=md-nav__item> <a href=../../../people/people/ class=md-nav__link> People </a> </li> <li class=md-nav__item> <a href=../../../code_of_conduct/ class=md-nav__link> Code of Conduct </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Primer <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Primer data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Primer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../primer/01_basic_python/0%20-%20Introduction%20and%20Jupyter%20Use/ class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../../primer/01_basic_python/1%20-%20Python%20Primer/ class=md-nav__link> Basic Python </a> </li> <li class=md-nav__item> <a href=../../../primer/02_python_part2/lessons/ class=md-nav__link> Advanced Python </a> </li> <li class=md-nav__item> <a href=../../../primer/03_MongoDB_part1/lessons_filled/ class=md-nav__link> Intro to MongoDB </a> </li> <li class=md-nav__item> <a href=../../../primer/04_Python_environments/1_pip_and_conda/ class=md-nav__link> Intro to Python Environments </a> </li> <li class=md-nav__item> <a href=../../../primer/04_Python_environments/2_google_colab/ class=md-nav__link> Intro to Google Colab </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Workshop <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Workshop data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Workshop </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_1 type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1> Day 1 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Day 1" data-md-level=2> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> Day 1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01_website_walkthrough/website_walkthrough/ class=md-nav__link> The Materials Project Website </a> </li> <li class=md-nav__item> <a href=../../02_intro_pymatgen/1%20-%20pymatgen%20foundations/ class=md-nav__link> Intro to Pymatgen </a> </li> <li class=md-nav__item> <a href=../../03_surfaces/Working%20With%20Surfaces_lesson/ class=md-nav__link> Working with Surfaces </a> </li> <li class=md-nav__item> <a href=../../04_materials_api/MAPI%20Lesson%20%28filled%29/ class=md-nav__link> The Materials API </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> Day 2 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Day 2" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Day 2 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../05_automated_dft/Lesson/ class=md-nav__link> Automated DFT </a> </li> <li class=md-nav__item> <a href=../Exploring%20Synthesis%20%28filled%29/ class=md-nav__link> Exploring Synthesis </a> </li> <li class=md-nav__item> <a href=../../07_mpcontribs/contribute/ class=md-nav__link> MPContribs </a> </li> <li class=md-nav__item> <a href=../../08_ml_matminer/matminer-notes/ class=md-nav__link> Machine Learning with MatMiner </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#goal class=md-nav__link> Goal </a> </li> <li class=md-nav__item> <a href=#outline class=md-nav__link> Outline </a> </li> <li class=md-nav__item> <a href=#1-identifying-a-target-system class=md-nav__link> 1. Identifying a target system </a> <nav class=md-nav aria-label="1. Identifying a target system"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-exercise-acquiring-entries-from-mp class=md-nav__link> 1.1 EXERCISE: Acquiring entries from MP </a> </li> <li class=md-nav__item> <a href=#12-exploring-downloaded-entries class=md-nav__link> 1.2 Exploring downloaded entries </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-building-phase-diagrams class=md-nav__link> 2. Building phase diagrams </a> <nav class=md-nav aria-label="2. Building phase diagrams"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-exercise-acquiring-all-entries-within-the-chemical-system class=md-nav__link> 2.1 EXERCISE: Acquiring all entries within the chemical system </a> </li> <li class=md-nav__item> <a href=#22-compositional-phase-diagrams class=md-nav__link> 2.2 Compositional phase diagrams </a> </li> <li class=md-nav__item> <a href=#23-compound-phase-diagrams-for-plotting-subsets-of-the-convex-hull class=md-nav__link> 2.3 Compound phase diagrams for plotting subsets of the convex hull </a> </li> <li class=md-nav__item> <a href=#24-incorporating-temperature-dependence-with-a-previously-derived-ml-model-g_sisso-and-experimental-data class=md-nav__link> 2.4 Incorporating temperature-dependence with a previously derived ML model (\(G_{SISSO}\)) and experimental data </a> </li> <li class=md-nav__item> <a href=#25-grand-potential-phase-diagrams-for-open-elements class=md-nav__link> 2.5 Grand potential phase diagrams for open elements </a> <nav class=md-nav aria-label="2.5 Grand potential phase diagrams for open elements"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#252-exercise-determine-oxygen-stability-window-of-ymno_3 class=md-nav__link> 2.5.2 EXERCISE: Determine oxygen stability window of YMnO\(_3\) </a> </li> <li class=md-nav__item> <a href=#253-finding-critical-chemical-potentials-within-pymatgen class=md-nav__link> 2.5.3 Finding "critical" chemical potentials within pymatgen </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#26-plotting-predominance-diagrams class=md-nav__link> 2.6 Plotting predominance diagrams </a> </li> <li class=md-nav__item> <a href=#27-bonus-plotting-chemical-potential-diagrams-adding-one-more-dimension class=md-nav__link> 2.7 BONUS: Plotting chemical potential diagrams (adding one more dimension!) </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-predicting-interface-reactions-between-solids class=md-nav__link> 3. Predicting interface reactions between solids </a> <nav class=md-nav aria-label="3. Predicting interface reactions between solids"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-a-simple-model-of-solid-state-synthesis class=md-nav__link> 3.1 A simple model of solid-state synthesis </a> </li> <li class=md-nav__item> <a href=#32-using-pymatgens-interface-reaction-calculator class=md-nav__link> 3.2 Using pymatgen's interface reaction calculator </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-enumerating-all-reactions-within-a-chemical-system class=md-nav__link> 4. Enumerating all reactions within a chemical system </a> <nav class=md-nav aria-label="4. Enumerating all reactions within a chemical system"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#41-minimize-gibbs-interface-reaction-approach class=md-nav__link> 4.1 Minimize Gibbs (interface reaction) approach </a> </li> <li class=md-nav__item> <a href=#42-brute-force-simple-approach class=md-nav__link> 4.2 Brute force (simple) approach </a> </li> <li class=md-nav__item> <a href=#43-bonus-enumerating-reactions-to-a-specific-target-or-from-specific-precursors class=md-nav__link> 4.3 BONUS: Enumerating reactions to a specific target or from specific precursors </a> </li> <li class=md-nav__item> <a href=#44-bonus-enumerating-open-reactions class=md-nav__link> 4.4 BONUS: Enumerating open reactions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-constructing-a-reaction-network-from-enumerated-reactions class=md-nav__link> 5. Constructing a reaction network from enumerated reactions </a> </li> <li class=md-nav__item> <a href=#6-bonus-finding-and-balancing-reaction-pathways-from-a-real-experiment class=md-nav__link> 6. BONUS: Finding and balancing reaction pathways from a real experiment </a> <nav class=md-nav aria-label="6. BONUS: Finding and balancing reaction pathways from a real experiment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#note-this-last-section-can-take-a-few-minutes-to-run class=md-nav__link> NOTE: this last section can take a few minutes to run! </a> <nav class=md-nav aria-label="NOTE: this last section can take a few minutes to run!"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#for-more-information-or-questions-regarding-this-lesson-please-contact-mcdermott-at-lblgov-thank-you class=md-nav__link> For more information or questions regarding this lesson, please contact mcdermott [at] lbl.gov Thank you! </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href="https://github.com/materialsproject/workshop/edit/master/docs/lessons/06_exploring_synthesis/Exploring Synthesis (blank).ipynb" title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <script src=https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js></script> <script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h1 id=exploring-materials-synthesis-with-mp-data-and-reaction-networks>Exploring Materials Synthesis with MP Data and Reaction Networks<a class=headerlink href=#exploring-materials-synthesis-with-mp-data-and-reaction-networks title="Permanent link">&para;</a></h1> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p><strong>Author:</strong> Matthew McDermott<br> <strong>Last updated:</strong> 08/05/21</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p><img alt src=../assets/banner.png></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=goal>Goal<a class=headerlink href=#goal title="Permanent link">&para;</a></h3> <p><em>Learn how to build &amp; interpret phase diagrams using MP data and apply these to predict reaction pathways in inorganic materials synthesis.</em></p> <h3 id=outline>Outline<a class=headerlink href=#outline title="Permanent link">&para;</a></h3> <ol> <li>Identifying a target system</li> <li>Building phase diagrams</li> <li>Predicting interface reactions between solids</li> <li>Enumerating all possible reactions to a specific target phase</li> <li>Constructing a reaction network from enumerated reactions</li> <li>Finding and balancing reaction pathways </li> </ol> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h2 id=1-identifying-a-target-system>1. Identifying a target system<a class=headerlink href=#1-identifying-a-target-system title="Permanent link">&para;</a></h2> <p><strong>Scenario:</strong> </p> <p>While researching ferroelectric materials, you stumble upon a compound that has shown much promise as a multiferroic material: <strong>yttrium manganese oxide, YMnO<span class=arithmatex>\(_3\)</span></strong>. When you consult the literature, it looks like there are many different approaches for making this material: solid-state synthesis, chimie douce methods, microwave-assisted synthesis, pulsed laser deposition, hydrothermal synthesis, etc. </p> <p>In almost all of the papers you find, however, the authors describe significant difficulty in synthesizing phase-pure YMnO<span class=arithmatex>\(_3\)</span>. For example: - <em>"... observation that crystallization at low temperature or high oxygen partial pressures gives a mixture of Y2Mn2O7 together with YMnO3" Brinks et al., Journal of Solid State Chemistry 129, 334-340 (1997).</em> - <em>"The solid state synthesis of YMnO3 requires very long procedure with repeated heating and grinding" Z. Brankovic et al. Ceramics International 41 (2015)</em> - <em>"There are still challenges to be addressed with respect to hydrothermal synthesis of h-YMnO3, most notably the difficulty in synthesising phase pure h-YMnO3. This is a result of the complexity of the system, with a total of eight crystalline phases having been detected throughout the course of the reaction." Marshall et al., Chem Eur. J 2020, 26, 9330-9337 (2020).</em></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Being familiar with the Materials Project database and <em>pymatgen</em>, you decide to check the database to see if it can help answer the question: <strong>why is phase-pure YMnO<span class=arithmatex>\(_3\)</span> so difficult to synthesize?</strong></p> <p>We previously learned how to use the <em>MPRester</em> to access computed data on the Materials Project. Let's start by importing <code>MPRester</code>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=11-exercise-acquiring-entries-from-mp>1.1 EXERCISE: Acquiring entries from MP<a class=headerlink href=#11-exercise-acquiring-entries-from-mp title="Permanent link">&para;</a></h3> <p>Using the <code>MPRester</code>, acquire all entries from the Materials Project with the composition YMnO<span class=arithmatex>\(_3\)</span> in the cell below:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=12-exploring-downloaded-entries>1.2 Exploring downloaded entries<a class=headerlink href=#12-exploring-downloaded-entries title="Permanent link">&para;</a></h3> <p>Now let's take a look at one of the downloaded entry objects.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>In the <code>ComputedStructureEntry</code> printout, we can see the uncorrected energy, correction, final energy, and the various parameters/data associated with the calculation.</p> <p>Since this is hard to interpret, it will be easier for us to reformat the entries into a <em>pandas</em> <code>DataFrame</code> with the relevant information. First we import <em>pandas</em>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>pandas</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And then we create a function to help us wrangle the entries into the <code>DataFrame</code> format:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>get_df_from_entries</span><span class=p>(</span><span class=n>entries</span><span class=p>):</span>
    <span class=n>formulas</span> <span class=o>=</span> <span class=p>[</span><span class=n>e</span><span class=o>.</span><span class=n>composition</span><span class=o>.</span><span class=n>reduced_formula</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>entries</span><span class=p>]</span>
    <span class=n>energies</span> <span class=o>=</span> <span class=p>[</span><span class=n>e</span><span class=o>.</span><span class=n>energy_per_atom</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>entries</span><span class=p>]</span>
    <span class=n>spacegroups</span> <span class=o>=</span> <span class=p>[</span><span class=n>e</span><span class=o>.</span><span class=n>structure</span><span class=o>.</span><span class=n>get_space_group_info</span><span class=p>()[</span><span class=mi>0</span><span class=p>]</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>entries</span><span class=p>]</span>
    <span class=n>structures</span> <span class=o>=</span> <span class=p>[</span><span class=n>e</span><span class=o>.</span><span class=n>structure</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>entries</span><span class=p>]</span>

    <span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;formula&quot;</span><span class=p>:</span> <span class=n>formulas</span><span class=p>,</span> <span class=s2>&quot;energy&quot;</span><span class=p>:</span> <span class=n>energies</span><span class=p>,</span> <span class=s2>&quot;spacegroup&quot;</span><span class=p>:</span> <span class=n>spacegroups</span><span class=p>,</span> <span class=s2>&quot;entry&quot;</span><span class=p>:</span><span class=n>entries</span><span class=p>}</span>

    <span class=n>df</span> <span class=o>=</span> <span class=n>pandas</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s2>&quot;energy&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>df</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The dataframe can now be easily created by calling this function:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We see that there are several polymorphs of similar energy. The lowest energy polymorph is the hexagonal YMnO<span class=arithmatex>\(_3\)</span> phase which is well known as the thermodynamically stable phase in the literature:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>If we want to interactively view this structure in JupyterLab, we can also import crystal_toolkit to view it:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h2 id=2-building-phase-diagrams>2. Building phase diagrams<a class=headerlink href=#2-building-phase-diagrams title="Permanent link">&para;</a></h2> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now that we've confirmed the existence of the target phase within the MP database, we'd like to better understand phase competition within the Y-Mn-O system. This means answering questions suchs as:</p> <ol> <li>Just how stable is YMnO<span class=arithmatex>\(_3\)</span>? </li> <li>How much energy is released upon formation of YMnO<span class=arithmatex>\(_3\)</span> from the corresponding binary oxides?</li> <li>What other phases might compete against the formation of YMnO<span class=arithmatex>\(_3\)</span>? </li> <li>What kinds of oxygen chemical potentials stabilize YMnO<span class=arithmatex>\(_3\)</span>? </li> </ol> <p>These are all questions that can be answered by constructing phase diagrams within <em>pymatgen</em>.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=21-exercise-acquiring-all-entries-within-the-chemical-system>2.1 EXERCISE: Acquiring all entries within the chemical system<a class=headerlink href=#21-exercise-acquiring-all-entries-within-the-chemical-system title="Permanent link">&para;</a></h3> <p>Let's start by downloading entries for the full Y-Mn-O system using <code>MPRester</code>. How many entries exist within the full Y-Mn-O system?</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=22-compositional-phase-diagrams>2.2 Compositional phase diagrams<a class=headerlink href=#22-compositional-phase-diagrams title="Permanent link">&para;</a></h3> <p>Now that we have all the entries within the Y-Mn-O system, we can create a ternary compositional phase diagram by simply passing the list of entries to create a <code>PhaseDiagram</code> object. Let's first import this class from the <em>phase_diagram</em> module:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And we can create the phase diagram:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>To plot the phase diagram, we can either: 1. Create a <code>PDPlotter</code> object and call <code>get_plot()</code> with custom arguments 2. Create a <code>PDPlotter</code> object and call <code>show()</code> 3. In JupyterLab, just type the name of the phase diagram object in a cell and click "enter"!</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Let's do option 1 so that we can see the possible arguments of the plotting function. First we import <code>PDPlotter</code>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And then we create the plotting object and call the <code>get_plot()</code> function:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The default backend for plotting phase diagrams is <em>plotly</em>, however, you can also specify <em>matplotlib</em>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>From the phase diagram, we see that there are three ternary oxides within the system: YMnO<span class=arithmatex>\(_3\)</span>, YMn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_5\)</span>, and Y<span class=arithmatex>\(_2\)</span>Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_7\)</span>. </p> <p>Let's look at formation energy data in a <em>pandas</em> <code>DataFrame</code>. As before, let's first create a helper function to wrangle the data into the correct format:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>get_df_from_pd</span><span class=p>(</span><span class=n>pd</span><span class=p>):</span>
    <span class=n>ents</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>stable_entries</span>

    <span class=n>formulas</span> <span class=o>=</span> <span class=p>[</span><span class=n>e</span><span class=o>.</span><span class=n>composition</span><span class=o>.</span><span class=n>reduced_formula</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>ents</span><span class=p>]</span>
    <span class=n>form_energies</span> <span class=o>=</span> <span class=p>[</span><span class=n>pd</span><span class=o>.</span><span class=n>get_form_energy_per_atom</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>ents</span><span class=p>]</span>
    <span class=n>decomp_enthalpies</span> <span class=o>=</span> <span class=p>[</span><span class=n>pd</span><span class=o>.</span><span class=n>get_phase_separation_energy</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>ents</span><span class=p>]</span>

    <span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;formula&quot;</span><span class=p>:</span> <span class=n>formulas</span><span class=p>,</span> <span class=s2>&quot;form_energy (eV/atom)&quot;</span><span class=p>:</span> <span class=n>form_energies</span><span class=p>,</span> <span class=s2>&quot;decomp_enthalpy (eV/atom)&quot;</span><span class=p>:</span> <span class=n>decomp_enthalpies</span><span class=p>}</span>

    <span class=n>df</span> <span class=o>=</span> <span class=n>pandas</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s2>&quot;form_energy (eV/atom)&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset_index</span><span class=p>(</span><span class=n>drop</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>df</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We then call this function to get the data frame:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>While YMnO<span class=arithmatex>\(_3\)</span> has one of the lowest formation energies within the Y-Mn-O system, it's decomposition enthalpy (i.e., energy "below" hull) is not very negative compared to the other phases in the system. This suggests that it has a low relative stability compared to the neighboring phases.</p> <p>This is largely due to the fact that <strong>Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> is a massive thermodynamic sink</strong> -- it has both the most negative formation energy and the most negative decomposition enthalpy. This can be confirmed by looking at the green color-shading on the ternary phase diagram.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=23-compound-phase-diagrams-for-plotting-subsets-of-the-convex-hull>2.3 Compound phase diagrams for plotting subsets of the convex hull<a class=headerlink href=#23-compound-phase-diagrams-for-plotting-subsets-of-the-convex-hull title="Permanent link">&para;</a></h3> <p>The previous analysis partially explains why synthesis routes to YMnO<span class=arithmatex>\(_3\)</span> from the starting binary oxides (i.e. Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> and Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>) require such high temperatures to proceed. We can take a slice of the hull with the <code>CompoundPhaseDiagram</code> to visualize this more clearly. First, let's import the module:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Before we can make the compound phase diagram, we have to specify the terminal compositions as <code>Composition</code> objects within pymatgen:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now we can initialize the compound phase diagram object and plot it:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>From the plot, if we hover over YMnO<span class=arithmatex>\(_3\)</span>, we see that the reaction energy between Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>-Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> is calculated to be <span class=arithmatex>\(\Delta\)</span>H = -0.044 eV/atom.</p> <p>An alternative way to derive this is by providing the entries to the <code>ComputedReaction</code> object, which will automatically balance the reaction for us. Let's import this reaction class:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Before we can initialize a reaction object, we have to acquire the entry objects which correspond to the following formulas:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We can get the entries by simply searching via a list comprehension:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We can then initialize the <code>ComputedReaction</code> object and print it:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>An important note: the reaction energy associated with the ComputedReaction object is eV per mole of reaction (i.e. per mole of YMnO<span class=arithmatex>\(_3\)</span>):</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>However, if we calculate the number of atoms in the reaction we can normalize this to a <strong>reaction energy per atom</strong> basis:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And now we see that the -0.044 eV/atom reaction energy matches with the result from the <code>CompoundPhaseDiagram</code> interface.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Note that the <code>CompoundPhaseDiagram</code> is also useful for plotting subsections of the convex hull:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=24-incorporating-temperature-dependence-with-a-previously-derived-ml-model-g_sisso-and-experimental-data>2.4 Incorporating temperature-dependence with a previously derived ML model (<span class=arithmatex>\(G_{SISSO}\)</span>) and experimental data<a class=headerlink href=#24-incorporating-temperature-dependence-with-a-previously-derived-ml-model-g_sisso-and-experimental-data title="Permanent link">&para;</a></h3> <p>The Materials Project contains DFT-calculated energies for compounds at T=0 K. Since most experimental syntheses take place well above 0 K, it is useful to have some idea how the phase diagram (and hence reaction energies, relative stabilities, etc.) change with increasing temperature.</p> <p>A recent work by Bartel et al. derived an equation to estimate the Gibbs free energy of formation of solids, <span class=arithmatex>\(\Delta G_f(T)\)</span>, as a function of temperature using the MP formation enthalpy as a reference. <em>Note that the formation enthalpy calculated from MP phase diagrams is actually an estimate of the formation enthalpy at T=298 K due to the specific corrections applied to the raw DFT energies.</em></p> <p>This has been implemented within pymatgen as the <code>GibbsComputedStructureEntry</code> class. Note that this implementation also includes the change in elemental chemical potentials as a function of temperature, as well as as the thermochemistry data for some known gases such as CO<span class=arithmatex>\(_2\)</span>.</p> <p><strong>Reference</strong>: <em>Bartel, C. J., Millican, S. L., Deml, A. M., Rumptz, J. R., Tumas, W., Weimer, A. W., … Holder, A. M. (2018). Physical descriptor for the Gibbs energy of inorganic crystalline solids and temperature-dependent materials chemistry. Nature Communications, 9(1), 4168. https://doi.org/10.1038/s41467-018-06682-4</em></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We can create the phase diagram at T = 2000 K and compare this to our previous MP (T=298 K) phase diagram. First let's import the module:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Since the entries are initialized using formation enthalpies (calculated from the phase diagram), it is most convenient to initialize a list of <code>GibbsComputedStructureEntry</code> objects from a list of regular <code>ComputedStructureEntry</code> objects, as below. This takes care of the phase diagram construction for you:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Let's print one of the entries to see what it looks like:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now we can make and plot our phase diagram with the new Gibbs entries:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We see that Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>, MnO<span class=arithmatex>\(_2\)</span>, and Y<span class=arithmatex>\(_2\)</span>Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_7\)</span> are all predicted to become significantly destabilized at higher temperatures. While some of this behavior could arise from differences in solid-state entropies, this is most likely a result of the significant decrease in oxygen chemical potential at high temperatures, which creates more reducing conditions that favor phases containing fewer oxygen atoms.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=25-grand-potential-phase-diagrams-for-open-elements>2.5 Grand potential phase diagrams for open elements<a class=headerlink href=#25-grand-potential-phase-diagrams-for-open-elements title="Permanent link">&para;</a></h3> <p>In solid-state synthesis, materials are often synthesized in some type of gaseous environment. This may be an inert gas, flowing/controlled oxygen, etc. A common question in materials synthesis is: <strong>what kind of atmosphere do I need to promote the synthesis of my target material?</strong></p> <p>For oxides such as YMnO<span class=arithmatex>\(_3\)</span> this means determining how oxidizing/reducing the environment should be; i.e., determining the partial pressure (and hence chemical potential) of oxygen.</p> <p>In thermodynamics, a system open to an element can be modeled with the grand potential, <span class=arithmatex>\(\phi\)</span>. For open oxygen, this corresponds to:</p> <div class=arithmatex>\[\phi = G - \mu_On_O\]</div> <p>We can switch to using grand potential by constructing the <code>GrandPotentialPhaseDiagram</code> within <em>pymatgen</em>. From now on, we will use <code>GibbsComputedStructureEntry</code> objects, as they are referenced to a standard state where elemental chemical potentials are 0 eV. This helps us better understand chemical potentials as a function of formation energies (rather than DFT energies). </p> <p>First, let's import the grand potential phase diagram class:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And now we construct the Gibbs entries at 1000 K:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>To specify an open element, we use the Element class from pymatgen:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And then we create the grand potential phase diagram and plot it:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>From the grand potential phase diagram above, we see that only YMn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_5\)</span> and Y<span class=arithmatex>\(_2\)</span>Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_7\)</span> are stable at a relative oxygen chemical potential of 0 eV at T = 1000 K. This corresponds to flowing (open) oxygen gas at the standard state of pressure of 0.1 MPa (close to 1 atm).</p> <p>Note that the phase diagram above corresponds to a binary system, since we have removed a degree of freedom by fixing the oxygen chemical potential to a specific value.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h4 id=252-exercise-determine-oxygen-stability-window-of-ymno_3>2.5.2 EXERCISE: Determine oxygen stability window of YMnO<span class=arithmatex>\(_3\)</span><a class=headerlink href=#252-exercise-determine-oxygen-stability-window-of-ymno_3 title="Permanent link">&para;</a></h4> <p>Determine the partial pressure of oxygen (at T = 1000 K) where YMnO<span class=arithmatex>\(_3\)</span> becomes stable.</p> <p><strong>Hint:</strong> <em>Determine the chemical potential of oxygen from manual phase diagram construction and use the following formula to solve for the pressure:</em></p> <div class=arithmatex>\[ \mu - \mu^0 = k_b T \ln{\frac{p}{p_0}} \]</div> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>math</span> <span class=kn>import</span> <span class=n>exp</span>

<span class=n>k</span> <span class=o>=</span> <span class=mf>8.617e-5</span>  <span class=c1># eV/K</span>
<span class=n>T</span> <span class=o>=</span> <span class=mi>1000</span>  <span class=c1># K</span>

<span class=n>mu_O</span> <span class=o>=</span> <span class=n>_</span> <span class=c1># found manually from phase diagram construction</span>
<span class=n>mu_O2</span> <span class=o>=</span> <span class=n>mu_O</span> <span class=o>*</span> <span class=mi>2</span>  
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>This is quite a low O<span class=arithmatex>\(_2\)</span> partial pressure. However, note that this value is extremely sensitive to small differences in calculated formation energies for the compounds. </p> <p>Temperature is often an even more powerful driver for oxidizing/reducing conditions than pressure. In fact, at higher temperatures (T = 1400 K), YMnO<span class=arithmatex>\(_3\)</span> is predicted to be stable even at the standard state (0.1 MPa) pressure.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h4 id=253-finding-critical-chemical-potentials-within-pymatgen>2.5.3 Finding "critical" chemical potentials within pymatgen<a class=headerlink href=#253-finding-critical-chemical-potentials-within-pymatgen title="Permanent link">&para;</a></h4> <p>As was hinted at above, all phases on the compositional phase diagram are stable within a certain region of chemical potentials. These do not need to be found manually as in the above exercise; instead, there are methods to solve for them algorithmically. In pymatgen, this can be found in the <code>get_chempot_range_stability_phase()</code> method. For YMnO<span class=arithmatex>\(_3\)</span>, we get:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Note that the upper bound value of chemical potential for oxygen matches what we found in the previous exercise (-0.343 eV).</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=26-plotting-predominance-diagrams>2.6 Plotting predominance diagrams<a class=headerlink href=#26-plotting-predominance-diagrams title="Permanent link">&para;</a></h3> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The chemical potential ranges over which a phase is stable can be plotted in a new diagram, typically called a predominance diagram. </p> <p>A predominance diagram can be created in pymatgen by calling <code>get_chempot_range_map_plot()</code> on a ternary phase diagram. Because one chemical potential is always dependent, we only need 2 dimensions to represent the chemical potential stability regions. Note: these form polygons, which are not necessarily rectangular.</p> <p><strong>Note:</strong> the -0.343 eV value where YMnO<span class=arithmatex>\(_3\)</span> becomes stable is actually the tip of the narrow YMnO<span class=arithmatex>\(_3\)</span> polygon!</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=27-bonus-plotting-chemical-potential-diagrams-adding-one-more-dimension>2.7 BONUS: Plotting chemical potential diagrams (adding one more dimension!)<a class=headerlink href=#27-bonus-plotting-chemical-potential-diagrams-adding-one-more-dimension title="Permanent link">&para;</a></h3> <p>It is often even more convenient to visualize all three dimensions within chemical potential space. For this, we can plot a <strong>chemical potential diagram</strong>. For now, this code only exists in the (separate) reaction-network package, but will be added soon to pymatgen.</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>To create the diagram, we first need to define some limits on the chemical potential ranges to plot:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And then we can plot it similar to plotting a conventional phase diagram in pymatgen. Try interacting with the full 3D figure yourself!</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>From the chemical potential diagram, we can easily see the relative stabilities of each phase and get a visual picture of where the critical chemical potentials are for each phase.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h2 id=3-predicting-interface-reactions-between-solids>3. Predicting interface reactions between solids<a class=headerlink href=#3-predicting-interface-reactions-between-solids title="Permanent link">&para;</a></h2> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=31-a-simple-model-of-solid-state-synthesis>3.1 A simple model of solid-state synthesis<a class=headerlink href=#31-a-simple-model-of-solid-state-synthesis title="Permanent link">&para;</a></h3> <p>In solid-state synthesis, precursor compounds are typically milled into powders of small solid crystallites. These powders are intimately mixed, typically pressed into a pellet, and then heated in a furnace. Historically, solid-state synthesis involves high temperatures (i.e. 1200 ºC) and long heating times (24-72 hrs). However, many reactions can proceed significantly faster (on the order of a few minutes) and at temperatures as low as 400-500ºC. </p> <p>A simple cartoon of solid-state synthesis can be seen below:</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p><img src=assets/interface_rxn.png width=750></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>At the interfaces where the powder crystallites touch, if the free energy of the system can be decreased by forming a new phase or set of phases, the new phase(s) will nucleate and grow.</p> <p>We can predict the possible reactions between the interface of any two phases by drawing a line (see the red dashed line below) connecting the two phases on the phase diagram. A reaction is given by each point where the connecting line intersects the phase diagram points/lines. </p> <p>In the hypothetical system below, there are two predicted reactions given by the yellow star and green circle -- in this case <strong>the reaction to form <span class=arithmatex>\(\gamma\)</span> (green circle) is the most thermodynamically favorable</strong> because it involves the greatest decrease in free energy. However, the reaction given by the yellow star is still favorable and may occur at higher temperatures / later times.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p><img src=assets/interface_pd.png width=900></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=32-using-pymatgens-interface-reaction-calculator>3.2 Using pymatgen's interface reaction calculator<a class=headerlink href=#32-using-pymatgens-interface-reaction-calculator title="Permanent link">&para;</a></h3> <p>The phase diagram slice approach depicted above has been implemented into pymatgen within the <code>InterfacialReactivity</code> class and is available as an app on the MP website. </p> <p>Let's see if we can apply it within the Y-Mn-O chemical system to better understand the synthesis of our YMnO<span class=arithmatex>\(_3\)</span> target. We will start with plotting the suggested reactions between Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> and Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>In the plot, we see a new convex hull slice, where each point represents a reaction as a function of the (normalized) ratio of mixing between the two reactants. To see which reactions the plot above corresponds to, we need to extract data about the "kinks" within the diagram. Let's use the code below to help us plot information about the reactions shown in the plot above:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>pandas</span><span class=o>.</span><span class=n>set_option</span><span class=p>(</span><span class=s2>&quot;max_colwidth&quot;</span><span class=p>,</span> <span class=mi>80</span><span class=p>)</span>  <span class=c1># make columns wider to see full reaction</span>

<span class=k>def</span> <span class=nf>get_df_from_interface_rxns</span><span class=p>(</span><span class=n>ir</span><span class=p>):</span>
    <span class=n>critical_rxns</span> <span class=o>=</span> <span class=p>[</span>
        <span class=p>{</span><span class=s2>&quot;Atomic fraction&quot;</span><span class=p>:</span><span class=nb>round</span><span class=p>(</span><span class=n>ratio</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span>
         <span class=s2>&quot;Reaction&quot;</span><span class=p>:</span> <span class=n>rxn</span><span class=p>,</span>
            <span class=s2>&quot;E$_</span><span class=si>{rxn}</span><span class=s2>$ (kJ/mol)&quot;</span><span class=p>:</span> <span class=nb>round</span><span class=p>(</span><span class=n>rxn_energy</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
            <span class=s2>&quot;E$_</span><span class=si>{rxn}</span><span class=s2>$ (eV/atom)&quot;</span><span class=p>:</span><span class=nb>round</span><span class=p>(</span><span class=n>reactivity</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>ratio</span><span class=p>,</span> <span class=n>reactivity</span><span class=p>,</span> <span class=n>rxn</span><span class=p>,</span> <span class=n>rxn_energy</span> <span class=ow>in</span> <span class=n>ir</span><span class=o>.</span><span class=n>get_kinks</span><span class=p>()</span>
    <span class=p>]</span>

    <span class=n>ir_df</span> <span class=o>=</span> <span class=n>pandas</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>critical_rxns</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>ir_df</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now we can construct and display the dataframe:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>In the table, we see the reactions as a function of the normalized mixing ratio, along with their energy in kJ per mole of reaction, as well as eV per (reactant) atom. </p> <p>It seems that YMnO<span class=arithmatex>\(_3\)</span> is indeed the major predicted reaction product when Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> and and Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> are combined in equal molar amounts. However, the reaction forming YMn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_5\)</span> and Mn<span class=arithmatex>\(_3\)</span>O<span class=arithmatex>\(_4\)</span> could still occur to some degree depending on the process by which the synthesis procedure occurs (i.e., initial grain sizes, heating rate, maximum temperature reached, etc.) This is because <strong>there is still a thermodynamic driving force for subsequent interfacial reaction between YMnO<span class=arithmatex>\(_3\)</span> and any remaining precursor Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span></strong>. This can be seen by plotting the same interface reaction plot between YMnO<span class=arithmatex>\(_3\)</span> and Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>It turns out that this is true again for any Mn<span class=arithmatex>\(_3\)</span>O<span class=arithmatex>\(_4\)</span> produced, which may react with remaining Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> precursor to make YMnO<span class=arithmatex>\(_3\)</span> and MnO. The same goes again for MnO and Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>. </p> <p>Just in this simple ternary system, we can already see the <strong>complex (and sometimes unpredictable) behavior associated with reaction pathways within solid-state synthesiss</strong>. To organize this progression of reactions, we choose to create a graph network representation of the possible reaction pathway, such as the one illustrated below:</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p><img src=assets/small_rxn_network.png width=900></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Before we can explore this reaction network structure further, however, we need to first discuss how to acquire all possible reactions which may occur within a chemical system.</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h2 id=4-enumerating-all-reactions-within-a-chemical-system>4. Enumerating all reactions within a chemical system<a class=headerlink href=#4-enumerating-all-reactions-within-a-chemical-system title="Permanent link">&para;</a></h2> <p>As we saw above, the possibility of subsequent reactions makes a model for solid-state synthesis quite complex. If we wish to capture this behavior, we first need to be able to enumerate through all possible reactions within a chemical system. These reactions will then be used to construct the reaction network.</p> <p>There are two methods for predicting reactions in a high-throughput manner: </p> <p>1) interface reactions predicted by iterating through all possible slices of the full phase diagram (as above) 2) brute force trial &amp; error balancing between any set of reactants and any set of products</p> <p>Both of these methods are implemented in the <em>reaction-network</em> package, which builds reaction network analysis on top of pymatgen. Please see the Github repository below if you are interested in exploring more:</p> <p><img src=assets/logo.png width=600></p> <p>https://github.com/GENESIS-EFRC/reaction-network</p> <h3 id=41-minimize-gibbs-interface-reaction-approach>4.1 Minimize Gibbs (interface reaction) approach<a class=headerlink href=#41-minimize-gibbs-interface-reaction-approach title="Permanent link">&para;</a></h3> <p>First, we need to come up with a candidate set of entries. Since we are using the <em>reaction-network</em> package, we are going to initialize the entries using that package's convenience methods:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now, we can initialize the enumerator object:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>To enumerate reactions, we call <code>enumerate()</code> with a list of provided entries. This will return a list of reactions which are computed using the interface reaction method from above:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>As before, let's look at these in a DataFrame by using a helper method:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>get_df_from_rxns</span><span class=p>(</span><span class=n>rxns</span><span class=p>):</span>
    <span class=n>energies</span> <span class=o>=</span> <span class=p>[</span><span class=n>r</span><span class=o>.</span><span class=n>energy_per_atom</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>rxns</span><span class=p>]</span>
    <span class=n>uncertainties</span> <span class=o>=</span> <span class=p>[</span><span class=n>r</span><span class=o>.</span><span class=n>energy_uncertainty_per_atom</span><span class=o>.</span><span class=n>s</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>rxns</span><span class=p>]</span>
    <span class=n>chemsyses</span> <span class=o>=</span> <span class=p>[</span><span class=n>r</span><span class=o>.</span><span class=n>chemical_system</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>rxns</span><span class=p>]</span>

    <span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;reaction&quot;</span><span class=p>:</span> <span class=n>rxns</span><span class=p>,</span> <span class=s2>&quot;energy&quot;</span><span class=p>:</span> <span class=n>energies</span><span class=p>,</span> <span class=s2>&quot;dE&quot;</span><span class=p>:</span> <span class=n>uncertainties</span><span class=p>,</span> <span class=s2>&quot;chemsys&quot;</span><span class=p>:</span> <span class=n>chemsyses</span><span class=p>}</span>

    <span class=k>return</span> <span class=n>pandas</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s2>&quot;energy&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset_index</span><span class=p>(</span><span class=n>drop</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>df</span> <span class=o>=</span> <span class=n>get_df_from_rxns</span><span class=p>(</span><span class=n>rxns</span><span class=p>)</span>
<span class=n>df</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We can plot a histogram of the reaction energies to get an idea of the thermodynamics of the system. Again, we see that Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> is quite stable (the reaction on the far left!). Most reactions, however, are in the -0.4 to 0.0 eV/atom range.</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=42-brute-force-simple-approach>4.2 Brute force (simple) approach<a class=headerlink href=#42-brute-force-simple-approach title="Permanent link">&para;</a></h3> <p>Enumerating reactions by brute force may seem like a less advanced approach, but it offers the added benefit that we can identify reactions involving:</p> <p>1) metastable products 2) products which are not stable with respect to each other</p> <p>This approach has been implemented with the <code>BasicEnumerator</code> class in the reaction-network package. Let's import the class:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>An enumerator object can be initialized with or without arguments:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Let's try using entries up to an energy cutoff of 30 meV/atom above the hull:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now we will enumerate via a brute force approach all reactions within this set of expanded entries. Note that we get both the forward and reverse reactions from this approach, producing a symmetric reaction energy distribution:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Building a dataframe with the reactions:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And plotting the reaction energy distribution:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=43-bonus-enumerating-reactions-to-a-specific-target-or-from-specific-precursors>4.3 BONUS: Enumerating reactions to a specific target or from specific precursors<a class=headerlink href=#43-bonus-enumerating-reactions-to-a-specific-target-or-from-specific-precursors title="Permanent link">&para;</a></h3> <p>The Enumerator classes also allow for specifying a desired target phase. This target can be provided as a formula on initialization of the enumerator object:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And we see that all enumerated reactions do indeed contain YMnO<span class=arithmatex>\(_3\)</span> as a product:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>It is also possible to specify precursors:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And it is even possible to specify both precursors <em>and</em> a target. In this case, we should only get one possible reaction:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h3 id=44-bonus-enumerating-open-reactions>4.4 BONUS: Enumerating open reactions<a class=headerlink href=#44-bonus-enumerating-open-reactions title="Permanent link">&para;</a></h3> <p>Since solid-state synthesis often happens in the presence of some kind of gaseous or "open" environment, it is also possible to enumerate so-called open reactions where a particular entry is open. For this, we can use <code>BasicOpenEnumerator</code>, or <code>MinimizeGrandPotentialEnumerator</code>:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>If these reactions involve an open entry that is also an element, then it is possible to recalculate the reaction energy in terms of grand potential. For this it helps to import <code>ReactionSet</code> for recalculating reaction energies all at once:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Similarly, it is also possible to enumerate reactions straight from the grand potential phase diagram:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h2 id=5-constructing-a-reaction-network-from-enumerated-reactions>5. Constructing a reaction network from enumerated reactions<a class=headerlink href=#5-constructing-a-reaction-network-from-enumerated-reactions title="Permanent link">&para;</a></h2> <p>Now that we have a way to enumerate all reactions within a chemical system, we'd like to be able to put them in a convenient data structure such that we can learn something about a system. One particular data structure that is helpful for predicting reaction pathways is a <strong>weighted directed graph</strong>. </p> <p>The weighted directed graph, or reaction network, connects all phases within the chemical system via the possible reactions between them. This corresponds to a structure like the following: - <strong>Nodes</strong>: Phase combinations - <strong>Edges</strong>: Reactions - <strong>Edge weights/costs</strong>: Reaction free energies (after monotonic transformation)</p> <p>The function that monotonically transforms reaction free energies to (positive) costs/weights is dubbed a cost function.</p> <p>For more information about this approach, please see the following publication:</p> <p><strong>Reference:</strong> <em>McDermott, M. J., Dwaraknath, S. S., and Persson, K. A. (2021). A graph-based network for predicting chemical reaction pathways in solid-state materials synthesis. Nature Communications, 12(1). https://doi.org/10.1038/s41467-021-23339-x</em></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Let's start by reacquiring entries for the Y-Mn-O system and filtering for stable entries at T = 900 K:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Now we specify the enumerator(s) and cost function to use in the network construction. At the moment, only the softplus function is implemented.</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We then initialize our reaction network object:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The network can be built by calling <code>build()</code>. This runs through each enumerator provided, and constructs the reaction network structure within the <em>graph-tool</em> package. The graph object is stored under the <code>graph</code> attribute.</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>To perform pathfinding, we first need to set the precursors and target defining the particular synthesis procedure we are interested in. For now, let's look at the synthesis of YMnO<span class=arithmatex>\(_3\)</span> from the starting binary oxides, Y<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span> and Mn<span class=arithmatex>\(_2\)</span>O<span class=arithmatex>\(_3\)</span>. We first acquire the entries from the set of entries by providing the formula:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And then we set the precursors and target nodes:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We can also draw a cartoon illustration of what this reaction network looks like using the <code>plot_network()</code> function</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We can perform simple pathfinding between the precursors node and target node. This finds the k-shortest paths between our precursors and target, which yields a sequence of reaction steps. <strong>Note: these are not necessarily mass balanced!</strong></p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <h2 id=6-bonus-finding-and-balancing-reaction-pathways-from-a-real-experiment>6. BONUS: Finding and balancing reaction pathways from a real experiment<a class=headerlink href=#6-bonus-finding-and-balancing-reaction-pathways-from-a-real-experiment title="Permanent link">&para;</a></h2> <h3 id=note-this-last-section-can-take-a-few-minutes-to-run>NOTE: this last section can take a few minutes to run!<a class=headerlink href=#note-this-last-section-can-take-a-few-minutes-to-run title="Permanent link">&para;</a></h3> <p>In 2019, Todd et al. reported the synthesis of YMnO3 through an "assisted metathesis" approach corresponding to the following reaction equation:</p> <div class=arithmatex>\[ Mn_2O_3 + 2 YCl_3 + 3 Li_2CO_3 \rightarrow 2 YMnO_3 + 6 LiCl + 3 CO_2 \]</div> <p>They also observed the following progression of phases, as determined via in situ X-ray diffraction on a synchrotron beamline:</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p><img src=assets/ymno3.png width=500></p> <p><strong>Reference:</strong> <em>Todd, P. K., Smith, A. M., &amp; Neilson, J. R. (2019). Yttrium manganese oxide phase stability and selectivity using lithium carbonate assisted metathesis reactions. Inorganic Chemistry, 58(22), 15166–15174. https://doi.org/10.1021/acs.inorgchem.9b02075</em></p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>To model this synthesis, we first acquire the entries for the entire 6-element chemical system from MP:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And we filter this entries by a stability filter of 20 meV/atom at T = 650 ºC:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>We then designate the enumerator, cost function, and build the network. <strong>NOTE: This may take a minute to build</strong>!</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>As before, we then set the precursors:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>And then we perform pathfinding to all three targets simultaneously:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Finally, we must enforce mass balance to filter out unfeasbile pathways. To do this, we import and use the <code>PathwaySolver</code> class:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The <code>PathwaySolver</code> takes a net reaction by which to enforce mass balance, i.e. total consumption of all produced intermediates. This corresponds to the previous reaction formula we showed. We can create a <code>ComputedReaction</code> object by finding the relevant entries and providing them to the reaction constructor:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>Finally, we solve for the balanced paths and print them. This may take a minute!</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The final balanced pathways can be printed, as below:</p> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <div class=inner_cell> <div class="text_cell_render border-box-sizing rendered_html"> <p>The balanced pathways are ordered by likelihood, as determined by an averaged cost.</p> <p>The pathways above successfully capture many of the experimentally observed intermediates and reaction steps, such as the reaction of YOCl and LiMnO<span class=arithmatex>\(_2\)</span>.</p> <h4 id=for-more-information-or-questions-regarding-this-lesson-please-contact-mcdermott-at-lblgov-thank-you>For more information or questions regarding this lesson, please contact <strong>mcdermott [at] lbl.gov</strong> Thank you!<a class=headerlink href=#for-more-information-or-questions-regarding-this-lesson-please-contact-mcdermott-at-lblgov-thank-you title="Permanent link">&para;</a></h4> </div> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Built by The Materials Project </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["instant", "tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.2b46852b.min.js></script> <script src=../../../assets/config.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>